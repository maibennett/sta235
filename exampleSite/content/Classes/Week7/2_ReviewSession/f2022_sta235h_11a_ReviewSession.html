<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>STA 235H - Review Session II</title>
    <meta charset="utf-8" />
    <meta name="author" content="McCombs School of Business, UT Austin" />
    <script src="libs/header-attrs/header-attrs.js"></script>
    <script src="libs/clipboard/clipboard.min.js"></script>
    <link href="libs/xaringanExtra-clipboard/xaringanExtra-clipboard.css" rel="stylesheet" />
    <script src="libs/xaringanExtra-clipboard/xaringanExtra-clipboard.js"></script>
    <script>window.xaringanExtraClipboard(null, {"button":"<i class=\"fa fa-clipboard\"><\/i>","success":"<i class=\"fa fa-check\" style=\"color: #90BE6D\"><\/i>","error":"<i class=\"fa fa-times-circle\" style=\"color: #F94144\"><\/i>"})</script>
    <link href="libs/font-awesome/css/all.css" rel="stylesheet" />
    <link href="libs/font-awesome/css/v4-shims.css" rel="stylesheet" />
    <script src="https://use.fontawesome.com/5235085b15.js"></script>
    <link rel="stylesheet" href="xaringan-themer.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# STA 235H - Review Session II
## Fall 2022
### McCombs School of Business, UT Austin

---


&lt;!-- &lt;script type="text/javascript"&gt; --&gt;
&lt;!-- MathJax.Hub.Config({ --&gt;
&lt;!--   "HTML-CSS": { --&gt;
&lt;!--     preferredFont: null, --&gt;
&lt;!--     webFont:  "Neo-Euler" --&gt;
&lt;!--   } --&gt;
&lt;!-- }); --&gt;
&lt;!-- &lt;/script&gt; --&gt;




&lt;style type="text/css"&gt;

.small .remark-code { /*Change made here*/
  font-size: 80% !important;
}

.tiny .remark-code { /*Change made here*/
  font-size: 90% !important;
}
&lt;/style&gt;





# Structure

- We will review **.darkorange[causal inference]**

  - For questions about regression interpretation, check out **.darkorange[Review Session I]**

--

- We will talk about RCTs, selection on observables, and Diff-in-Diff.

--

- You will **.darkorange[discuss with a group]** and come up with answers. We will discuss them together.


---
&lt;br&gt;
&lt;br&gt;

.box-2Trans[Participate!]

.box-2trans[Even if you make a mistake, everyone can learn from that]

--

.box-4Trans[Ask questions!]

.box-4trans[You are here on a Friday... take advantage of it :)]

---
# Exercise: Marketing campaign

**.darkorange[Context]**

You are working for a large retail brand and are between two marketing campaigns: One featuring Billie Eilish and another one featuring Ariana Grande. You decide to test the success of this campaign by randomizing these ads on social media (e.g. IG stories), and seeing which one gets the most clicks.


1) What is your treatment group and your control group? What is your outcome?

--

2) What is `\(Y(0)\)` and `\(Y(1)\)`?

--

3) How would you estimate a treatment effect in this case?

--

4) Are there potential confounders here?

---
# Exercise: Rain Barrels

**.darkorange[Context]**

- The metropolitan Austin area is interested in helping residents become more environmentally conscious, reduce their water consumption, and save money on their monthly water bills. 

- To do this, Hays, Comal, Guadalupe, and Travis counties have jointly initiated a new program that provides free rain barrels to families who request them. These barrels collect rain water, and the reclaimed water can be used for non-potable purposes (like watering lawns and gardens). Officials hope that families that use the barrels will rely more on rain water and will subsequently use fewer county water resources, thus saving both the families and the counties money.

- Being evaluation-minded, the counties hired an consultant (you!) before rolling out their program, and you convinced them to fund and run a randomized controlled trial (RCT) during 2021 using a random sample of families within these counties.

---
# Exercise: Rain Barrels

Your RCT dataset contains the following variables:
.small[
- `id`: A unique ID number for each household
- `water_bill`: The family’s average monthly water bill, in dollars
- `barrel`: A factor variable showing if the family participated in the program
- `yard_size`: The size of the family’s yard, in square feet
- `home_garden`: An character variable showing if the family has a home garden
- `attitude_env`: The family’s self-reported attitude toward the environment, on a scale of 1-10 (10 meaning highest regard for the environment)
- `temperature`: The average outside temperature]

1) What is your treatment group and your control group? What is your outcome?

--

2) How should your balance table look like?

--

3) How would you estimate the treatment effect in this case?

---
# Exercise: Rain Barrels

These are your results from the RCT:

.small[

```
## 
## Call:
## lm(formula = water_bill ~ barrel, data = barrels_rct)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -88.239 -21.062  -1.299  20.558  79.191 
## 
## Coefficients:
##             Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)  187.869      1.837  102.24   &lt;2e-16 ***
## barrelNo      40.573      2.744   14.78   &lt;2e-16 ***
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## Residual standard error: 30.3 on 491 degrees of freedom
## Multiple R-squared:  0.308,	Adjusted R-squared:  0.3066 
## F-statistic: 218.6 on 1 and 491 DF,  p-value: &lt; 2.2e-16
```
]

- Interpret the relevant coefficient.

---
# Exercise: Rain Barrels

**.darkorange[Context]**

- Imagine you ran your RCT and found that it had a positive effect, so the counties decide to roll it out and offer it to everyone. &lt;u&gt;Note that not everyone had to take it&lt;/u&gt;, but they could opt into it if they wanted.

--

1) Do you think that the effect that we find in the RCT should be the same as the effect for the entire population? (*Hint: Think about generalizability*)

--

2) Who do you think is more likely to opt into this program?

--

2) Can we compare people that opt in vs those that don't opt in to get a causal effect? Why or why not?

---
# Exercise: Rain Barrels

**.darkorange[Context]**

- You decide to do matching between people that opt-in (treatment group) and those that do not (control group), and match on environmental attitude, temperature, yard size, and home garden.

--

1) Can you estimate a causal effect using your matched sample? Why or why not?

--

2) What else could you be missing?

---
# Exercise: Rain Barrels

These are your results from matching:

.small[

```
## 
## Call:
## lm(formula = water_bill ~ barrel, data = barrels_matched)
## 
## Residuals:
##    Min     1Q Median     3Q    Max 
## -89.16 -17.90  -1.01  20.95  79.76 
## 
## Coefficients:
##                 Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)      194.940      1.299  150.03   &lt;2e-16 ***
## barrelNo barrel   34.225      1.838   18.62   &lt;2e-16 ***
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## Residual standard error: 29.2 on 1008 degrees of freedom
## Multiple R-squared:  0.256,	Adjusted R-squared:  0.2553 
## F-statistic: 346.9 on 1 and 1008 DF,  p-value: &lt; 2.2e-16
```
]

- Interpret the relevant coefficient.

---
# Exercise: Rain Barrels

**.darkorange[Context]**

You now realize that there was another neighboring county, Bexar, that implemented this program in 2019, and you have data for all these counties for the period 2018-2019.

You think this would be a great setup for a Diff-in-Diff analysis!

--

1) What would your treatment group be? And your control group?

--

2) What two variables would you need to create and how would you do it?

---
# Exercise: Rain Barrels

These are your results from diff-in-diff:

.small[

```
## 
## Call:
## lm(formula = water_bill ~ treat * post, data = barrels_dd)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -99.900 -20.114  -0.609  21.670  92.624 
## 
## Coefficients:
##             Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)  224.800      1.080 208.123   &lt;2e-16 ***
## treat         22.155      1.528  14.504   &lt;2e-16 ***
## post          15.012      1.528   9.828   &lt;2e-16 ***
## treat:post   -44.645      2.160 -20.667   &lt;2e-16 ***
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## Residual standard error: 29.3 on 2940 degrees of freedom
## Multiple R-squared:  0.1386,	Adjusted R-squared:  0.1377 
## F-statistic: 157.6 on 3 and 2940 DF,  p-value: &lt; 2.2e-16
```
]

- Interpret the relevant coefficient. 

---

    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script src="macros.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false,
"ratio": "16:9"
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
