pagedown::chrome_print('C:/Users/mc72574/Dropbox/Hugo/Sites/sta235/exampleSite/content/Classes/Week7/2_DD/f2021_sta235h_11_DD.html')
pagedown::chrome_print('C:/Users/mc72574/Dropbox/Hugo/Sites/sta235/exampleSite/content/Classes/Week7/1_NaturalExperiments/f2021_sta235h_10_NaturalExperiments.html')
pagedown::chrome_print('C:/Users/mc72574/Dropbox/Hugo/Sites/sta235/exampleSite/content/Classes/Week7/1_NaturalExperiments/f2021_sta235h_10_NaturalExperiments.html')
pagedown::chrome_print('C:/Users/mc72574/Dropbox/Hugo/Sites/sta235/exampleSite/content/Classes/Week7/2_DD/f2021_sta235h_11_DD.html')
################################################################################
### Title: "Week 7 - Diff-in-Diff"
### Course: STA 235H
### Semester: Fall 2021
### Professor: Magdalena Bennett
################################################################################
# Clears memory
rm(list = ls())
# Clears console
cat("\014")
### Load libraries
# If you don't have one of these packages installed already, you will need to
#run install.packages() line
library(tidyverse)
library(ggplot2)
library(estimatr)
library(modelsummary)
library(vtable)
library(did)
###############################################################################
################ Look what Taylor Swift made me do
###############################################################################
# This is simulated data using real Google trends of popularity for Taylor Swift.
# this shows popularity over time, including the release of one of her albums (on the week of 07/19/2020 for the west coast, and 08/09/2020 for the rest).
swift <- read.csv("https://raw.githubusercontent.com/maibennett/sta235/main/exampleSite/content/Classes/Week7/2_DD/data/swift.csv")
# Data shows for each state and week of the year (past 12 months), a popularity index, whether the state belongs to the "west coast" glitch or not, and the week the album was released in each place.
head(swift)
# Let's look at the states
View(swift %>% group_by(state) %>% count())
# Let's create some additional variables:
# The glitch happened in "2020-07-19"
# The album became available for all US states in "2020-08-09"
# Let's focus first on the time period before the album was available everywhere:
swift_sub <- swift %>% filter(dates < as.Date("2020-08-09"))
# Let's create a variable post (1 if it's after the glitch, 0 in another case)
swift_sub <- swift_sub %>% mutate(post = ifelse(dates >= as.Date("2020-07-19"), 1, 0))
# Now, let's run a differences-in-differences model!
lm_dd <- lm(popularity ~ west_coast*post, data = swift_sub)
summary(lm_dd)
table(swift$dates)
################################################################################
### Title: "Week 7 - Natural Experiments"
### Course: STA 235H
### Semester: Fall 2021
### Professor: Magdalena Bennett
################################################################################
# Clears memory
rm(list = ls())
# Clears console
cat("\014")
### Load libraries
# If you don't have one of these packages installed already, you will need to
#run install.packages() line
library(tidyverse)
library(ggplot2)
library(estimatr)
library(modelsummary)
library(MatchIt)
library(vtable)
################################################################################
################ Oregon Insurance Plan example #################################
################ Example for a Natural Experiment ##############################
oregon <- read.csv("https://raw.githubusercontent.com/maibennett/sta235/main/exampleSite/content/Classes/Week7/1_NaturalExperiments/data/oregonhie_simplified.csv") #Load the data (almost 75k obs)
set.seed(100)
id <- sample(seq(1:nrow(oregon)), nrow(oregon), replace = TRUE)
id <- sample(seq(1:nrow(oregon)), nrow(oregon)*0.3, replace = TRUE)
oregon_small <- oregon[id,]
setwd("C:/Users/mc72574/Dropbox/Hugo/Sites/sta235/exampleSite/content/Classes/Week7/1_NaturalExperiments/code")
write.csv(oregon_small,file = "oregonhie_simplified_small.csv")
oregon <- read.csv("https://raw.githubusercontent.com/maibennett/sta235/main/exampleSite/content/Classes/Week7/1_NaturalExperiments/data/oregonhie_simplified_small.csv") #Load the data (almost 73k obs)
probation <- read.csv("https://raw.githubusercontent.com/maibennett/sta235/main/exampleSite/content/Assignments/Homework/data/hw3/probation.csv")
View(probation)
View(probation)
