---
title: "Practice Questions"
author: "STA 235H"
date: "2023"
output: 
  html_document:
    css: style.css 
    toc: no
  pdf_document: 
    latex_engine: xelatex
    css: style.css
    toc: no
---
<style type="text/css">
.main-container {
  max-width: 1800px;
  margin-left: auto;
  margin-right: auto;
}

@media only screen and (max-width: 700px) {
   body {
      margin: 0;
      padding: 0;
   }
   .sample {
      width: 100%;
   }
}
</style>

```{r init, echo=FALSE, message=FALSE, warning=FALSE}
library(knitr)
library(showtext)
library(tidyverse)
library(modelsummary)
```

```{r fonts, message=FALSE, echo=FALSE, warning=FALSE}
font.add.google("Fira Sans Condensed", "Fira Sans Condensed")
font.add.google("Fira Sans", "Fira Sans")
font.add.google("Roboto Condensed", "Roboto Condensed")
font.add.google("Yanone Kaffeesatz", "Yanone Kaffeesatz")
```

## Instructions

- This set of questions are meant to serve as practice based on what we have seen in class. Use them to assess your own understanding of these topics.

- Material covered here refers to different types of regression models, and conceptual questions about causal inference.

- While answers will not be posted, students can contact the instruction team with their own work to check their answers.


# How much should insurance cost?

We have a dataset of over 1,300 people with their insurance charges and socio-demographic characteristics.

- `age`: The insurer's age.
- `sex`: Whether the insurer is male or female.
- `bmi`: A measure of Body Mass Index, which is constructed by dividing the person's weight (in kg.) over their squared height (in cm.)
- `children`: Number of children. 
- `smoker`: Whether the person is a smoker or not.
- `region`: Region in the US in which they reside.
- `charges`: Insurance charges (e.g. medical expenses).

You can find the data here:

```{r setup, warning=FALSE, message=FALSE}
insurance = read.csv("https://raw.githubusercontent.com/maibennett/sta235/main/exampleSite/content/PracticeQuestions/data/insurance.csv")
```

We are interested in analyzing the association between different characteristics and how much people pay in medical expenses.

**1) Create a plot that shows the association between charges and age**


**2) Recreate the same plot as in question 1, but now show with different colors whether a person is a smoker or not (include a legend). What can you say about smokers in this case?**


**3) Build a regression using age, body mass index, smoker category, and sex as covariates, and charges as the dependent variable. Interpret all the coefficients for this model.**


**4) Create a binary variable called `insurance30` if insurance charges are above $30,000, and 0 in another case. Run the same regression than in question 3, but use `insurance30` as the dependent variable. Interpret all coefficients.**


**5) Given that charges is all positive values and it looks right-skewed, create a new variable `log_charges` for the logarithm of charges. Run the same regression as before using this new outcome and interpret all coefficients.**


**6) We want to know whether we can say that there is a causal effect of being a smoker on charges in the insurance. Create a balance table between both groups as we have seen in class. Are these groups balanced?**


**7) Can we say that the estimate in question 3 is a causal effect of being a smoker on charges? Why or why not? Give a specific example.**
